setwd("C:/Users/MMKONDIWA/OneDrive - CIMMYT/Documents/GitHub/where_to_put_agroecology/models/Crop_Diversity")
sink("C:/Users/MMKONDIWA/OneDrive - CIMMYT/Documents/GitHub/where_to_put_agroecology/models/Crop_Diversity/console.txt", append = FALSE)
##########################################################################################
#
#     ~ ~ ~ Simple Crop Diversity Model (CDM) ~ ~ ~
#     ~ ~ ~ this is just a toy model ~ ~ ~
#     ~ ~ ~ Input data ~ ~ ~
#    land_use.asc        |land use map containing the following classes
#                        |1,2,3,4,5 = arable land with increasing intensity from 1 to 5
#
#    crop suitability.asc  |map on soil fertility which can range from 0.1 to 1
#
#    Objective: Maximize crop value of production
#
##########################################################################################

# set working directory

# read in ascii files
lu.map <- read.table("map.asc", h=F, skip=6, sep=" ")

# array index for arable land
arable.idx <- which(lu.map <= 10 & lu.map > 0, arr.ind=T)

# calculate crop yield as logarithmic function of intensity and soil fertility
count_crops <- lu.map[arable.idx]
count_crops[is.na(count_crops)] <- 0
count_crops.sum <- sum(count_crops)

# write model output
write.table(count_crops.sum, "CDM_output.csv", append = FALSE, sep = ";", col.names = FALSE, row.names = FALSE)

























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































sink()
